
<html>
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>do it better</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">


<<<<<<< HEAD
        <link rel="stylesheet" href="{{ STATIC_URL }}css/normalize.css">
        <link rel="stylesheet" href="{{ STATIC_URL }}css/main.css">
        <link rel="stylesheet" href="{{ STATIC_URL }}css/default.css">
        <script src="{{ STATIC_URL }}js/vendor/modernizr-2.6.2.min.js"></script>
        
        
    <!--
    Include the maps javascript with sensor=true because this code is using a
    sensor (a GPS locator) to determine the user's location.
    See: https://developers.google.com/apis/maps/documentation/javascript/basics#SpecifyingSensor
    -->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&language=en"></script>

    <script>
    
//colors
var yellow = "FFFF57";
var green = "34BA46";
var red = "FE7569";
var blue = "3490EC";

var map;

function initialize() {

  var games = new Array(0);
  
  {% for game in gameList %}
    games.push({{game|safe}});
  {% endfor %}

  var mapOptions = {
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  // Try HTML5 geolocation
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = new google.maps.LatLng(position.coords.latitude,
                                       position.coords.longitude);
      map.setCenter(pos);
    }, function() {
      handleNoGeolocation(true);
    });
  } else {
    // Browser doesn't support Geolocation
    handleNoGeolocation(false);
  }
  
  // Configure the look of the game pins
  var pinColor = blue;
  var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
  new google.maps.Size(21, 34),
  new google.maps.Point(0,0),
  new google.maps.Point(10, 34));var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
  new google.maps.Size(40, 37),
  new google.maps.Point(0, 0),
  new google.maps.Point(12, 35));
    
  var gameMarkers = new Array(0);
    
  
  var infowindow = new google.maps.InfoWindow({
    content: ''
  });
  
  for (var i = 0; i < games.length; i++) {
  
    // Build the game markers array
    gameMarkers.push(new google.maps.Marker({
        position: new google.maps.LatLng(games[i].lat, games[i].long ),
        icon: pinImage,
        shadow: pinShadow,
        map: map,
        clickable: true,
        title : i.toString()
      })
    );
    
    gameMarkers[i].info = games[i];
    
    // Add the click listener for that marker
    google.maps.event.addListener(gameMarkers[i], 'click', function(e) {

        infowindow.content =   '<div id="content">'+
                '<div class="date"></div>'+
                '<div class="time">'+this.info.when+'</div>'+
                '<h2 id="firstHeading" class="firstHeading">'+this.info.sport+'</h2>'+
                '<div id="bodyContent">'+
                '<p>'+(this.info.open ? "Open Event" : "Closed Event")+'</p>'+
                '</div>'+
            '</div>';
        infowindow.open(map,this);
        console.log(this.info);
    });
    
  }

  // We clicked on the map
  google.maps.event.addListener(map, 'clicker', function(e) {
    var position = e.latLng;
    if (typeof marker === 'undefined') {
    
      var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
      new google.maps.Size(21, 34),
      new google.maps.Point(0,0),
      new google.maps.Point(10, 34));var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
      new google.maps.Size(40, 37),
      new google.maps.Point(0, 0),
      new google.maps.Point(12, 35));
      
      marker = new google.maps.Marker({
        position: position,
        draggable: true,
        icon: pinImage,
        shadow: pinShadow,
        map: map,
        title: i.toString()
      });
      google.maps.event.addListener(marker, 'mouseup', function() {
        console.log(marker.getPosition());
        // Send coords via AJAX
      });
      map.panTo(position);
    } else {
    }
    //infowindow.open(map,marker);
  });
  
}

function handleNoGeolocation(errorFlag) {
  if (errorFlag) {
    var content = 'Error: The Geolocation service failed.';
  } else {
    var content = 'Error: Your browser doesn\'t support geolocation.';
  }

  var options = {
    map: map,
    position: new google.maps.LatLng(45.5, -73.58333),
    content: content
  };

  //var infowindow = new google.maps.InfoWindow(options);
  map.setCenter(options.position);
}

google.maps.event.addDomListener(window, 'load', initialize);
    </script>        
        
=======
        <LINK REL="StyleSheet" href="{{ STATIC_URL }}css/main.css" TYPE="text/css">
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDN6yYnxfECayfh8jP3t2TTuf_jsjW0pKI&sensor=true"></script>
        <script src="{{ STATIC_URL }}js/FX.js" type="text/javascript"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

>>>>>>> d9628446faa2ca2c4061650d10e66a0b45f999dc
    </head>

    <body>

        {% block main %}
        
        <div class="header">

            <a id="home-link" href="{% url 'directory.views.index' %}"> <img src="{{ STATIC_URL }}images/homepage/logo-geosports-FINAL.png" /> </a>
            <div class="tableBox">
            <table id="littleSpace">
                <tr>
                    <td><img src="{{ STATIC_URL }}images/homepage/arrow-game-on.png"/></td><td>Get your game on</td><td><img src="{{ STATIC_URL }}images/homepage/arrow-game-on.png"/></td>
                </tr>
            </table>
            <table>
                <tr>
                    <form id="filter">
                        {% csrf_token %}
                        {% for field in form %}
                            <td> {{ field }} </td>
                        {% endfor %}
                        <td id="filter">FILTER</td>
                    </form>
                </tr>
            </table>
            </div>
                    

        
            {% if user.is_authenticated %}
                <a id="profile-link" href="{% url 'directory.views.profile' %}"> my profile </a>
            {% else %}
                <a id="login" href="{% url 'django.contrib.auth.views.login' %}"> login </a>
                <a id="sign-up" href="{% url 'directory.views.signup' %}"> <img src=" {{ STATIC_URL }}images/homepage/button-signup.png" /></a>
            {% endif %}

        </div>

        <div class="container2">

            <!-- 
            <div id="map-canvas" style="width: 500px; height: 300px"></div>
        -->
        {% for game in gameList %}
        {{ game.sport }} | {{ game.skill_level }}
        {% endfor %}

        </div>

        {% endblock main %}

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        


    </body>
    
</html>
